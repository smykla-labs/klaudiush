# GIT017: PR Merge Message Validation Failed

## Error

PR title or body doesn't follow commit message conventions for squash merge.

## Why This Matters

- Squash merge uses PR title + body as the commit message
- Invalid PR messages bypass direct commit validation
- Maintains commit history quality in main branch
- Ensures all commits follow conventional commit standards

## Common Causes

- PR title exceeds 50 characters
- PR title doesn't follow `type(scope): description` format
- PR body lines exceed 72 characters
- Using `feat(ci)` or `fix(test)` instead of `ci(...)` or `test(...)`
- PR body contains forbidden patterns

## How to Fix

### Fix PR Title

Ensure title follows conventional commits format:

```bash
# Good:
feat(validator): add merge validation
ci(workflow): update build matrix
fix(parser): handle empty input

# Bad:
feat(ci): update workflow  # Use ci(...) not feat(ci)
This is a very long title that exceeds the fifty character limit
Added some changes  # Missing type and scope
```

### Fix PR Body

Ensure body lines respect 72 character limit:

```bash
gh pr edit <number> --body "Short summary line.

Detailed description with lines wrapped at 72 characters.
Each line should not exceed this limit.

More details here."
```

### Add to Merge Command

Provide body via `--body` flag:

```bash
gh pr merge <number> --squash --body "$(cat <<'EOF'
Short summary.

Detailed description properly wrapped.

Signed-off-by: Your Name <your.email@klaudiu.sh>
EOF
)"
```

## Configuration

Configure merge message validation:

```toml
[validators.git.merge.message]
enabled = true
title_max_length = 50
body_max_line_length = 72
conventional_commits = true
require_scope = true
block_infra_scope_misuse = true
```

Disable merge message validation:

```toml
[validators.git.merge.message]
enabled = false
```

Allow longer titles for reverts:

```toml
[validators.git.merge.message]
allow_unlimited_revert_title = true
```

## Related

- [GIT004](GIT004.md) - Title Issues
- [GIT005](GIT005.md) - Body Issues
- [GIT006](GIT006.md) - Infrastructure Scope Misuse
- [GIT013](GIT013.md) - Invalid Conventional Commit Format
- [GIT018](GIT018.md) - Merge Signoff Missing
